(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{533:function(t,s,a){"use strict";a.r(s);var n=a(27),r=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h2",{attrs:{id:"什么是chrome扩展程序"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#什么是chrome扩展程序"}},[t._v("#")]),t._v(" 什么是chrome扩展程序")]),t._v(" "),a("p",[t._v("扩展程序允许您为 Chrome 浏览器增加功能，而不需要深入研究本机代码。如果你熟悉网页开发所用到的核心技术（HTML、CSS 与 JavaScript），那么你要学习的就是通过Chrome公开的一些API为 Chrome 浏览器创建新的扩展程序。")]),t._v(" "),a("h2",{attrs:{id:"明确需求"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#明确需求"}},[t._v("#")]),t._v(" 明确需求")]),t._v(" "),a("p",[t._v("在开始开发之前，你需要有一个比较明确的目标，具体要实现什么功能？这样在接下来的开发中才不会觉得茫然，在这里，我会告诉你我自己的一个想法以及我是如何实现它的。")]),t._v(" "),a("h2",{attrs:{id:"我们开始吧"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#我们开始吧"}},[t._v("#")]),t._v(" 我们开始吧")]),t._v(" "),a("p",[t._v("每次打开百度搜索列表页面，很大概率都能看到前面几条的广告，如果一连出现三、四条广告的话，很影响用户所能看到的版面，基于这种现象，我想开发一个能自动屏蔽列表广告的扩展程序。")]),t._v(" "),a("h2",{attrs:{id:"_1-配置和编写代码"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-配置和编写代码"}},[t._v("#")]),t._v(" 1. 配置和编写代码")]),t._v(" "),a("p",[t._v("第一步是创建一个名为 manifest.json 的清单文件，我们使用它来向 Chrome 浏览器声明扩展程序将会做什么，以及为了完成这些任务所需要的权限，"),a("a",{attrs:{href:"https://crxdoc-zh.appspot.com/extensions/manifest",target:"_blank",rel:"noopener noreferrer"}},[t._v("具体的manifest介绍请参考这"),a("OutboundLink")],1),t._v("。")]),t._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"manifest_version"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  \n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"name"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"百度广告净化器"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 扩展名称")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"description"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"屏蔽百度广告"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 扩展描述")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"version"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"1.0.0"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 扩展版本")]),t._v("\n  \n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"permissions"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 请求权限")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"https://www.baidu.com/"')]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"browser_action"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 指定扩展的图标放在Chrome的工具栏中")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"default_icon"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 相应图标文件的位置")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"19"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"logo_19.png"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"38"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"logo_38.png"')]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// "default_popup": ""')]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"content_scripts"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"matches"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"http://www.baidu.com/*"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"https://www.baidu.com/*"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"js"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"jquery-3.4.1.min.js"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"content_script.js"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v('在上面的清单文件中，我们定义了一个扩展名为"百度广告净化器"的程序，需要说明的是：')]),t._v(" "),a("ol",[a("li",[a("p",[t._v("我们不需要点击icon弹出内容，所以去掉了default_popup，下图展示的即为default_popup属性指定的文件位置所对应的内容。"),a("br"),t._v(" "),a("img",{attrs:{src:"/blogs/create-a-custom-chrome-extension/browser-action.png",alt:"img"}})])]),t._v(" "),a("li",[a("p",[t._v("我们也不需要后台页面和事件页面，后台页面与内容页面交互需通过"),a("a",{attrs:{href:"https://crxdoc-zh.appspot.com/extensions/messaging",target:"_blank",rel:"noopener noreferrer"}},[t._v("消息传递"),a("OutboundLink")],1)])]),t._v(" "),a("li",[a("p",[t._v("我们只需要内容脚本和百度的权限，用来处理当前页面上的DOM元素，为了简单方便，我们引入了JQuery。")])])]),t._v(" "),a("p",[t._v("现在我们工作的目录中应该有五个文件： icon_19.png、icon_38.png、manifest.json、jquery-3.4.1.min.js、content_script.js。")]),t._v(" "),a("p",[t._v("接下来我们在content_script.js中编写我们的逻辑代码")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 移除广告DOM元素")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("removeAdDOM")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("callback")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 屏蔽竞价推广广告")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" adDom "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("$")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'.ec_tuiguang_ppimlink'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("parents")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'div[data-pos]'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("$")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'.ec_tuiguang_pplink'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("parents")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'div.result, div[cmatchid]'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    Promise"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("all")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("adDom"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("map")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("v")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" v"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("remove")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("callback"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h2",{attrs:{id:"_2-测试一下我们编写的扩展程序"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-测试一下我们编写的扩展程序"}},[t._v("#")]),t._v(" 2. 测试一下我们编写的扩展程序")]),t._v(" "),a("p",[t._v("现在访问 "),a("code",[t._v("chrome://extensions")]),t._v(" 看看是否行得通，请确保勾选了右上角的『开发者模式』复选框。")]),t._v(" "),a("p",[a("br"),a("img",{attrs:{src:"/blogs/create-a-custom-chrome-extension/1.png",alt:"image"}}),a("br")]),t._v(" "),a("p",[t._v("点击『加载已解压的扩展程序』并选择你的应用所在的目录。如果程序有效，你将看到如下画面")]),t._v(" "),a("p",[a("br"),a("img",{attrs:{src:"/blogs/create-a-custom-chrome-extension/2.png",alt:"image"}}),a("br")]),t._v(" "),a("p",[t._v("现在我们打开百度搜索“会计考试”")]),t._v(" "),a("p",[t._v("未启用时如下图所示")]),t._v(" "),a("p",[a("br"),a("img",{attrs:{src:"/blogs/create-a-custom-chrome-extension/3.png",alt:"image"}}),a("br")]),t._v(" "),a("p",[t._v("启用后如下图所示")]),t._v(" "),a("p",[a("br"),a("img",{attrs:{src:"/blogs/create-a-custom-chrome-extension/4.png",alt:"image"}}),a("br")]),t._v(" "),a("h2",{attrs:{id:"_3-发布你的程序"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-发布你的程序"}},[t._v("#")]),t._v(" 3. 发布你的程序")]),t._v(" "),a("p",[t._v("访问 "),a("a",{attrs:{href:"https://chrome.google.com/webstore/developer/dashboard",target:"_blank",rel:"noopener noreferrer"}},[t._v("Chrome 应用商店"),a("OutboundLink")],1),t._v("（如果没有跳转，则系统会要求你先登录 Google 账户）。随后需要支付5美元，支付完成后，点击『添加新内容』按钮，会出现如下画面")]),t._v(" "),a("p",[a("img",{attrs:{src:"/blogs/create-a-custom-chrome-extension/5.png",alt:"image"}})]),t._v(" "),a("p",[t._v("成功上传文件后，我们将会看到一个表单，里面有详细说明、图标以及相关截图等程序的信息，我们可以上传一些好看的图片来充当宣传图片，这样当用户搜索到的时候，也能很直观的看到扩展程序的功能特性，发布前你可以点击『预览』来看一下程序的基本信息，觉得可以之后点击发布就完成啦。")]),t._v(" "),a("p",[t._v("发布完成后，需等上一段时间，方能被用户搜索到，感兴趣的话可以看看我的项目"),a("a",{attrs:{href:"https://chrome.google.com/webstore/search/%E7%99%BE%E5%BA%A6%E5%B9%BF%E5%91%8A%E5%87%80%E5%8C%96%E5%99%A8?hl=zh-CN",target:"_blank",rel:"noopener noreferrer"}},[t._v("百度广告净化器"),a("OutboundLink")],1)]),t._v(" "),a("h2",{attrs:{id:"_4-最后结语"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-最后结语"}},[t._v("#")]),t._v(" 4. 最后结语")]),t._v(" "),a("ol",[a("li",[t._v("百度广告很顽固，稍有不慎就会触发展示广告的事件，难以根除，本文也只是抛砖引玉。")]),t._v(" "),a("li",[t._v("小编有幸几年前接触过火狐扩展，限于当时自身的技术和能力，只能全网搜索有趣的插件，而这些有趣的插件的作者，大多都是因为兴趣、爱好而进行开发，从而促使了小编走上了前端这条道路。")]),t._v(" "),a("li",[t._v("作为前端开发人员，开发chrome扩展用到的技术并不难，主要是掌握 Chrome 公开 API 的知识，容易入门，难以精通。虽然做个简单的扩展很容易，但若是要开发一个尽善尽美的扩展的话，还是需要花费你更多的时间和精力的。有更多问题，"),a("a",{attrs:{href:"https://crxdoc-zh.appspot.com/extensions/getstarted",target:"_blank",rel:"noopener noreferrer"}},[t._v("请参考文档"),a("OutboundLink")],1)]),t._v(" "),a("li",[t._v("接下来，请尽情发挥你的想象吧！")])])])}),[],!1,null,null,null);s.default=r.exports}}]);